<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>From Hexagons to Foresight – Maps That Matter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="How H3 hexagons, a spatial datacube, and visualisations turn Dutch geo-data into insight, time travel, and foresight."
  />

  <style>
    :root {
      --bg: #ffffff;
      --text: #222222;
      --accent: #004b6b;
      --muted: #666666;
      --border: #dddddd;
      --max-width: 760px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      line-height: 1.7;
      background: var(--bg);
      color: var(--text);
    }

    /* Reading Progress Bar */
    .progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 0%;
      height: 3px;
      background: var(--accent);
      z-index: 1000;
      transition: width 0.1s ease;
    }

    .container {
      display: flex;
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
    }

    /* Social Sharing Sidebar */
    .social-share {
      flex: 0 0 60px;
      padding: 2.5rem 0 4rem 1.25rem;
    }

    .social-share-sticky {
      position: sticky;
      top: 2rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .share-button {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 1px solid var(--border);
      background: var(--bg);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      color: var(--muted);
    }

    .share-button:hover {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
      transform: translateY(-2px);
    }

    .share-button svg {
      width: 18px;
      height: 18px;
    }

    /* Table of Contents */
    .toc-wrapper {
      flex: 0 0 240px;
      padding: 2.5rem 1rem 4rem 1.25rem;
    }

    .toc {
      position: sticky;
      top: 2rem;
    }

    .toc-title {
      font-size: 0.875rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--muted);
      margin: 0 0 1rem;
    }

    .toc-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .toc-list li {
      margin-bottom: 0.5rem;
    }

    .toc-list a {
      display: block;
      color: var(--muted);
      text-decoration: none;
      font-size: 0.9rem;
      padding: 0.25rem 0;
      border-left: 2px solid transparent;
      padding-left: 0.75rem;
      transition: all 0.2s ease;
    }

    .toc-list a:hover {
      color: var(--accent);
      border-left-color: var(--accent);
    }

    .toc-list a.active {
      color: var(--accent);
      border-left-color: var(--accent);
      font-weight: 500;
    }

    /* Main Content */
    .page {
      flex: 1;
      max-width: var(--max-width);
      padding: 2.5rem 1.25rem 4rem;
    }

    header {
      margin-bottom: 2rem;
    }

    h1 {
      font-size: clamp(2rem, 3vw, 2.6rem);
      margin: 0 0 0.5rem;
      color: var(--accent);
      line-height: 1.2;
    }

    /* Meta information */
    .post-meta {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      margin-top: 1.5rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border);
      font-size: 0.9rem;
      color: var(--muted);
      flex-wrap: wrap;
    }

    .author-info {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .author-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--border);
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .meta-divider {
      color: var(--border);
    }

    h2 {
      margin-top: 2.5rem;
      margin-bottom: 0.75rem;
      font-size: 1.4rem;
      line-height: 1.4;
      color: var(--accent);
      scroll-margin-top: 2rem;
    }

    h3 {
      margin-top: 2rem;
      margin-bottom: 0.5rem;
      font-size: 1.1rem;
    }

    p {
      margin: 0 0 1rem;
      color: var(--text);
    }

    p.lead {
      font-size: 1.05rem;
      color: var(--muted);
    }

    a {
      color: var(--accent);
      text-decoration: underline;
      text-decoration-thickness: 1px;
      text-underline-offset: 0.15em;
    }

    a:hover {
      opacity: 0.85;
    }

    /* Section breaks */
    section {
      position: relative;
    }

    section:not(:last-child) {
      margin-bottom: 3rem;
      padding-bottom: 3rem;
      border-bottom: 1px solid #f0f0f0;
    }

    /* Media containers */
    .iframe-wrapper,
    .video-wrapper,
    .image-wrapper {
      margin: 1.5rem auto 2rem;
      max-width: 900px;
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid var(--border);
    }

    iframe,
    video,
    .image-wrapper img {
      display: block;
      width: 100%;
      border: 0;
    }

    .note {
      font-size: 0.9rem;
      color: var(--muted);
      margin-top: 0.5rem;
    }

    ul {
      margin: 0 0 1rem 1.2rem;
      padding: 0;
    }

    ol {
      margin: 0 0 1rem 1.2rem;
      padding: 0;
    }

    li {
      margin-bottom: 0.25rem;
    }

    /* Mobile Social Share */
    .mobile-share {
      display: none;
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 2px solid var(--border);
    }

    .mobile-share-title {
      font-size: 0.875rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--muted);
      margin: 0 0 1rem;
    }

    .mobile-share-buttons {
      display: flex;
      gap: 1rem;
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .social-share {
        display: none;
      }

      .toc-wrapper {
        display: none;
      }

      .container {
        display: block;
      }

      .page {
        max-width: 100%;
        margin: 0 auto;
      }

      .mobile-share {
        display: block;
      }
    }

    @media (min-width: 900px) {
      .page {
        padding-top: 3rem;
      }
    }

    /* Smooth scrolling */
    html {
      scroll-behavior: smooth;
    }
  </style>
</head>
<body>
  <!-- Reading Progress Bar -->
  <div class="progress-bar" id="progressBar"></div>

  <div class="container">
    <!-- Social Sharing Sidebar -->
    <aside class="social-share">
      <div class="social-share-sticky">
        <a href="#" class="share-button" id="shareTwitter" title="Share on Twitter" aria-label="Share on Twitter">
          <svg fill="currentColor" viewBox="0 0 24 24">
            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
          </svg>
        </a>
        <a href="#" class="share-button" id="shareLinkedIn" title="Share on LinkedIn" aria-label="Share on LinkedIn">
          <svg fill="currentColor" viewBox="0 0 24 24">
            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
          </svg>
        </a>
        <a href="#" class="share-button" id="shareEmail" title="Share via Email" aria-label="Share via Email">
          <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
          </svg>
        </a>
        <a href="#" class="share-button" id="copyLink" title="Copy link" aria-label="Copy link">
          <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
          </svg>
        </a>
      </div>
    </aside>

    <!-- Table of Contents -->
    <aside class="toc-wrapper">
      <nav class="toc">
        <div class="toc-title">Contents</div>
        <ul class="toc-list">
          <li><a href="#honeycomb">The honeycomb that makes data talk</a></li>
          <li><a href="#one-map">Step 1 – One map, one story</a></li>
          <li><a href="#time-travel">Step 2 – When one layer isn't enough</a></li>
          <li><a href="#talking">Step 3 – Talking to your data</a></li>
          <li><a href="#predictions">Step 4 – From patterns to predictions</a></li>
          <li><a href="#explore">Step 5 – Play, explore, decide</a></li>
          <li><a href="#looking-ahead">Step 6 – Looking ahead</a></li>
          <li><a href="#final">Final thought</a></li>
          <li><a href="#try">Try it yourself</a></li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="page">
      <header>
        <h1>From Hexagons to Foresight</h1>
        <p class="lead">
          Not everything can fit everywhere, all the time, all at once, but cats certainly made a good attempt at it.
        </p>
        
        <div class="post-meta">
          <div class="author-info">
            <img src="images/profile_pic_thijs.png" alt="Thijs Oosterhuis" class="author-avatar" />
            <span>Thijs Oosterhuis</span>
          </div>
          <span class="meta-divider">•</span>
          <div class="meta-item">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
            <span>December 9, 2025</span>
          </div>
          <span class="meta-divider">•</span>
          <div class="meta-item">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
            <span id="readTime">12 min read</span>
          </div>
        </div>
      </header>

      <section>
        <p>
          You might remember in my previous blog,
          <em>From Chaos to Clarity</em>, when we turned messy datasets into a
          single, structured foundation — a spatial datacube that finally made
          sense of all those CSVs, shapefiles, and spreadsheets.
        </p>

        <p>
          Now that the data is clean and connected, the next question is:
          <strong>What can we actually see when everything speaks the same
          spatial language?</strong>
        </p>

        <p>That's where H3 comes in.</p>
      </section>

      <section>
        <h2 id="honeycomb">The honeycomb that makes data talk</h2>

        <p>
          H3 divides the world into a honeycomb of hexagons, each one
          representing an equal slice of the Earth's surface. Whether you're
          looking at housing prices, noise levels, flood risk, or biodiversity,
          each dataset aligns perfectly on the same grid.
        </p>

        <p>
          It turns chaotic maps into something more like building blocks. Once
          everything fits, we can start constructing meaning, not just
          visualizations.
        </p>
      </section>

      <section>
        <h2 id="one-map">Step 1 – One map, one story</h2>

        <p>Let's start simple.</p>

        <p>
          Take one indicator from the datacube — <strong>groundheight</strong>,
          the height above sea level. Visualized through H3, each hexagon tells
          you how high (or low) the land sits relative to NAP.
        </p>

        <p>
          A map like this immediately shows why the Dutch saying
          <em>"God created the world, but the Dutch created the Netherlands"</em>
          is more than a cliché. Much of the country lies below sea level, yet we
          live, build, and cycle there safely thanks to centuries of design and
          engineering.
        </p>

        <p>
          An interactive map of groundheight, or a short video zooming across the
          hexagons, turns an abstract number into something intuitive:
        </p>

        <div class="iframe-wrapper">
          <iframe
            src="https://maps.mapsthatmatter.io/groundheight"
            height="800"
            loading="lazy"
            title="Groundheight map"
          ></iframe>
        </div>

        <p>
          This is the first step in developing spatial literacy: making data feel
          real.
        </p>
      </section>

      <section>
        <h2 id="time-travel">Step 2 – When one layer isn't enough: travelling through time</h2>

        <p>
          To understand how areas change, a single snapshot is rarely enough.
          This is where H3 becomes especially powerful: because every hexagon is
          tracked over multiple years, we can explore spatial change as a kind of
          time travel.
        </p>

        <h3>A small detour: what happens when you compare landcover with people?</h3>

        <p>
          While exploring the datacube, I ran a quick correlation check between
          landcover (LGN) and demographic indicators (CBS). As expected, the
          positive correlations brought no surprises. Places with more built-up
          area show strong relationships with:
        </p>
        
        <ul>
          <li>Total inhabitants (r = 0.79)</li>
          <li>Men and women (r = 0.79)</li>
          <li>Households (r = 0.78)</li>
          <li>Housing units (r = 0.78)</li>
        </ul>
        
        <p>
          In other words: where you build more, more people live. Nothing
          shocking.
        </p>
        
        <p>
          The negative correlations, however, revealed something more unexpected—and
          unintentionally funny.
        </p>
        
        <p>
          The strongest negative relationships appear between
          <strong>agrarisch grasland</strong> (agricultural grassland) and population density:
        </p>
        
        <ul>
          <li>Women: r = –0.43</li>
          <li>Total inhabitants: r = –0.43</li>
          <li>Men: r = –0.42</li>
          <li>Households: r = –0.40</li>
        </ul>
        
        <p>
          In plain language: the more agricultural grassland a hexagon contains, the
          fewer people live there—with the correlation slightly stronger for women 
          than men.
        </p>
        <p>
          A perfectly logical spatial pattern… but also the exact data-driven
          explanation for the existence of the TV show
          <em>"Boer zoekt Vrouw"</em> ("Farmer seeks a wife").
        </p>

        <p>
          According to the hexagons, farmers quite literally live in places where
          there are statistically fewer women — a demographic phenomenon neatly
          confirmed by Pearson's r.
        </p>

        <p>Spatial analysis, it turns out, sometimes comes with its own punchline.</p>

        <h3>Time travel on the Maasvlakte</h3>

        <p>
          The second interactive example shows temporal change beautifully. Built-up
          area is visualised in 3D height, while the colour shows the number of
          inhabitants. By moving the year slider, you can watch neighbourhoods
          grow, densify, or shift in character over time.
        </p>

        <p>
          A striking example appears on the <strong>Maasvlakte in Rotterdam</strong>.
          Slide the timeline to <strong>2022</strong> and you will see tall blocks
          of built-up area — yet the hexagons remain dark in colour, indicating
          zero inhabitants. At first glance this looks like a data error, but it
          is not. What you are seeing is the moment when newly created land was
          developed for industrial use, not residential living. The map makes the
          transformation visible: a landscape that didn't exist a decade ago
          becomes a major industrial extension of the port, without adding new
          population.
        </p>

        <p>
          This is the strength of hexagon-based time travel: the map shows not
          just where things are, but how and when they appeared.
        </p>

        <p>
          This interactive map makes this intuitive even for non-technical audiences. Changing
          the year slider tells a story in seconds — urban expansion, industrial
          growth, and changing spatial footprints become visible without reading
          a single table.
        </p>

        <div class="iframe-wrapper">
          <iframe
            src="https://maps.mapsthatmatter.io/population-3d"
            height="800"
            loading="lazy"
            title="Population 3D map"
          ></iframe>
        </div>
      </section>

      <section>
        <h2 id="talking">Step 3 – Talking to your data</h2>

        <p>
          Once the metadata is structured and described in JSON, something
          interesting becomes possible: the data becomes conversational.
        </p>

        <p>
          Imagine looking for a house in the province of South-Holland. The criteria you have are:
        </p>

        <ul>
          <li>Above sea-level by at least 0.3 m. I don't mind getting my feet wet, but anything below that becomes uncomfortable.</li>
          <li>I don't want to build a new house. I want to know where there are already existing houses.</li>
          <li>I like my peace and quiet, meaning I want to live in an area below a certain level of background noise.</li>
          <li>I don't want to live near a toxic gas cloud attention area, so not in the vicinity of industrial areas.</li>
        </ul>

        <p>This set of criteria can then be explored by simply typing:</p>

        <ol>
          <li><em>Where is the terrain higher than 30 centimeters above sea level (NAP), so the risk of flooding is smaller?</em></li>
          <li><em>Where is there already an existing residential function, so where people are already allowed or able to live?</em></li>
          <li><em>Where is it relatively quiet, with a noise level below 50 decibels (Lden)?</em></li>
          <li><em>Where is it outside a toxic cloud attention area, meaning there is no increased risk in case of a chemical incident?</em></li>
        </ol>

        <p>
          An LLM interprets these sentences, looks up what each field means, and
          translates it into a query on the H3 datacube. No SQL required. Just a
          conversation with your map, as shown in the video below.
        </p>
        
        <div class="video-wrapper">
          <video 
              src="videos/llm_example_housing.mp4"
              controls 
              autoplay 
              muted 
              loop
          ></video>
        </div>
        
        <p>
          This video of our tool at the Province of South-Holland shows a chat prompt on one side and a
          map on the other which makes this interaction feel tangible. This works
          because the data is described clearly enough for humans and machines to
          understand it in the same way.
        </p>

        <p>
          Imagine taking it one step further. Since we have the data of several years in the datacube, 
          we can even ask it temporal changes. So, suddenly a complex temporal change analysis becomes
          a simple question in human language. 
          
          For example, ask: <em>"Where have the number of inhabitants decreased and where has the forest area increased 
          between 2018 and 2023?"</em> and the visualization shows you these area's. This is showing a 
          trend analysis in a simple way.
        </p> 

        <div class="image-wrapper">
          <img 
          src="images/inhabitants_vs_forest_2018_2023.png" 
          alt="Inhabitants vs Forest correlation between 2018–2023" 
          />
        </div>
        
        <p>
          This might be a criteria as well when looking for a new house, 
          as you might want to focus on an areas where the population is decreasing, but the forest area 
          is increasing, as this might indicate a more quiet and green environment.
        </p>
      </section>

      <section>
        <h2 id="predictions">Step 4 – From patterns to predictions</h2>

        <p>
          The dataset spans 2018 to 2023, which means each hexagon contains a
          small timeline. Plotting these values — for example, average WOZ value
          or number of new homes — reveals how regions have evolved. Some areas
          densify, others stabilize, some shift slowly without anyone noticing.
        </p>

        <p>
          Even simple trend analysis allows us to project where growth, pressure,
          or risk may increase if these patterns continue. These are not perfect
          forecasts, but they provide foresight.
        </p>

        <p>
          An animated interactive timelapse showing the rise in WOZ values or
          changes in population density makes these trajectories visible. Once you
          see how areas evolve, the conversation moves from "what happened?" to
          "what should we prepare for?"
        </p>
      </section>

      <section>
        <h2 id="explore">Step 5 – Play, explore, decide</h2>

        <p>
          You do not need specialist software to explore these patterns. An
          interactive dashboard works directly in the browser.
        </p>

        <p>
          In workshops, even non-technical teams immediately begin asking sharper
          questions. Someone invariably points at the map and says:
          <em>"So that's why those two areas feel so different."</em>
        </p>

        <p>
          This is exactly the point: spatial data should be intuitive. A simple
          interactive map with sliders for year, WOZ value, or noise level
          invites managers and policymakers to explore and experiment.
        </p>

        <p>
          Including an embedded interactive dashboard in this blog gives readers the
          chance to hover over their neighbourhood and discover which hexagons
          surprise them.
        </p>
      </section>

      <section>
        <h2 id="looking-ahead">Step 6 – Looking ahead</h2>

        <p>
          This is only the beginning. In the next blog, I will explore how the
          same H3 grid can connect to real-time data streams such as satellite
          imagery, weather sensors, or biodiversity indicators.
        </p>

        <p>
          When datasets share the same spatial language, collaboration becomes far
          easier. Maps stop being static reports and start functioning as shared
          interfaces for conversation and decision-making.
        </p>
      </section>

      <section>
        <h2 id="final">Final thought: the power of pattern recognition</h2>

        <p>
          Each hexagon is a data point, but together they form a story about how
          we live, build, and adapt.
        </p>

        <p>
          The strength of H3 lies not only in precision but in perspective. It
          allows managers, designers, citizens, and data specialists to see the
          landscape through the same lens — whether they are searching for
          opportunity, quality of life, or long-term resilience.
        </p>

        <p>
          From data to dialogue. From hexagons to foresight. From maps that
          describe the world to maps that help us shape it.
        </p>
      </section>

      <section>
        <h2 id="try">Try it yourself</h2>

        <p>
          For the more data-savvy among you, the first version of the datacube with all land-cover, demographic, and climate data, as well as municipality names from 2018 to 2023,
          <a href="https://github.com/thijsradijs-pzh/maps-that-matter-kepler/blob/main/data/volledige_tijdreeks_met_namen.parquet"> is available here as a parquet file </a>.
          Download that, and upload it to: <a href="https://kepler-preview.foursquare.com/" target="_blank" rel="noopener">
            kepler and duckDB.
          </a>.
          If you explore it, I would love to hear what you notice, which patterns
          reveal themselves, and how you might use this in your own decisions.
        </p>
      </section>

      <!-- Mobile Social Share -->
      <div class="mobile-share">
        <div class="mobile-share-title">Share this article</div>
        <div class="mobile-share-buttons">
          <a href="#" class="share-button" id="shareTwitterMobile" title="Share on Twitter">
            <svg fill="currentColor" viewBox="0 0 24 24">
              <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
            </svg>
          </a>
          <a href="#" class="share-button" id="shareLinkedInMobile" title="Share on LinkedIn">
            <svg fill="currentColor" viewBox="0 0 24 24">
              <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
            </svg>
          </a>
          <a href="#" class="share-button" id="shareEmailMobile" title="Share via Email">
            <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
            </svg>
          </a>
          <a href="#" class="share-button" id="copyLinkMobile" title="Copy link">
            <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
            </svg>
          </a>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Reading Progress Bar
    function updateProgressBar() {
      const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      document.getElementById('progressBar').style.width = scrolled + '%';
    }

    window.addEventListener('scroll', updateProgressBar);

    // Calculate Read Time (approximation based on word count)
    function calculateReadTime() {
      const text = document.querySelector('.page').innerText;
      const wordCount = text.trim().split(/\s+/).length;
      const wordsPerMinute = 200;
      const readTime = Math.ceil(wordCount / wordsPerMinute);
      document.getElementById('readTime').textContent = readTime + ' min read';
    }

    calculateReadTime();

    // Highlight active section in TOC
    const sections = document.querySelectorAll('h2[id]');
    const tocLinks = document.querySelectorAll('.toc-list a');

    function highlightTOC() {
      let current = '';
      
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const scrollPos = window.scrollY + 100;
        
        if (scrollPos >= sectionTop) {
          current = section.getAttribute('id');
        }
      });

      tocLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + current) {
          link.classList.add('active');
        }
      });
    }

    window.addEventListener('scroll', highlightTOC);
    highlightTOC();

    // Social Sharing Functions
    const currentUrl = encodeURIComponent(window.location.href);
    const title = encodeURIComponent(document.title);

    function setupShareButtons(prefix = '') {
      // Twitter/X
      document.getElementById('shareTwitter' + prefix).addEventListener('click', (e) => {
        e.preventDefault();
        window.open(`https://twitter.com/intent/tweet?url=${currentUrl}&text=${title}`, '_blank', 'width=550,height=420');
      });

      // LinkedIn
      document.getElementById('shareLinkedIn' + prefix).addEventListener('click', (e) => {
        e.preventDefault();
        window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${currentUrl}`, '_blank', 'width=550,height=420');
      });

      // Email
      document.getElementById('shareEmail' + prefix).addEventListener('click', (e) => {
        e.preventDefault();
        window.location.href = `mailto:?subject=${title}&body=Check out this article: ${currentUrl}`;
      });

      // Copy Link
      document.getElementById('copyLink' + prefix).addEventListener('click', (e) => {
        e.preventDefault();
        navigator.clipboard.writeText(window.location.href).then(() => {
          const button = e.currentTarget;
          const originalTitle = button.title;
          button.title = 'Copied!';
          button.style.background = '#4CAF50';
          button.style.color = 'white';
          setTimeout(() => {
            button.title = originalTitle;
            button.style.background = '';
            button.style.color = '';
          }, 2000);
        });
      });
    }

    // Setup desktop share buttons
    setupShareButtons('');
    // Setup mobile share buttons
    setupShareButtons('Mobile');
  </script>
</body>
</html>
